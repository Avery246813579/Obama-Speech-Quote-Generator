<!doctype html>
<head>
    <title>Obama Quote Generator</title>

    <title>Silicon Valley</title>
    <!--<link rel=stylesheet type=text/css href="/static/style.css?cache={{time}}">-->
    <link rel=stylesheet type=text/css href="/static/style.css?cache={{time}}">
    <link rel="shortcut icon" href="/static/images/favicon.ico"/>
</head>

<body>
<div id="wrapper">
    <div id="navbar" style="margin: auto; text-align: center; padding: 3px;">
        <img src="/static/images/wh_logo_seal_mobile.png" style="max-height: 50px;">
    </div>

    <img src="/static/images/last_hero3_4.jpg" style="max-width: 100%;">

    <div id="quote">
        <div class="header">
            Yes, we did. Yes, we can.
        </div>

        <div class="text">
            <div id="sentence">
                "{{ sentence }}"
            </div>

            - President Barack Obama
        </div>

        <div class="buttons">
            <a href='#' onclick="refreshSentence()" class='button'>Generate a new quote</a>
            <a href='#' onclick="tweet()" class='button'>Tweet this quote</a>
        </div>
    </div>

    <div id="about">
        <div class="header">
            AN IN-DEPTH LOOK AT THIS PROJECT
        </div>
        <br>
        <center><a href="https://github.com/Avery246813579/Obama-Speech-Quote-Generator">This project</a> was made by <a
                href="https://www.linkedin.com/in/avery-durrant-676402148/">Avery Durrant</a> using Markov Chains.
        </center>
        <center>The Corpus I used was has {{lines}} lines of text and {{words}} words. It was taken from over 200 of
            Barack Obama's Speeches.
        </center>
    </div>

    <div style="float: left">
        <input placeholder="Sentence Length" id="length">
    </div>
</div>
</body>

<script src="/static/jquery-3.2.1.min.js"></script>
<script>
    var id = 0;
    /**id = {{id}}**/

    function refreshSentence() {
        var length = document.getElementById('length');

        $.ajax({
            url: "new",
            method: "post",
            contentType: 'application/json',
            data: JSON.stringify({
                words: length.value
            }),
            dataType: 'json',
        }).done(function (object) {
            var text = document.getElementById('sentence');

            if (object['success'] === true) {
                text.innerHTML = '"' + object['data'] + '"';
                id = object['id'];
            } else {
                alert("Internal Error!");
            }
        });
    }

    function tweet() {
        var length = document.getElementById('length');

        $.ajax({
            url: "tweet",
            method: "post",
            contentType: 'application/json',
            data: JSON.stringify({
                tweet: id
            }),
            dataType: 'json',
        }).done(function (object) {
            var text = document.getElementById('sentence');

            if (object['success'] === true) {
                alert("Tweet Successful");
            } else {
                alert("Internal Error!");
            }
        });
    }

</script>
